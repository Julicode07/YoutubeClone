---
import ShowVideos from "../components/ShowVideos.astro";
import VideoSkeleton from "../components/VideoSkeleton.astro";
import Layout from "../layouts/Layout.astro";
const apiKey = import.meta.env.YOUTUBE_API_KEY;

const response = await fetch(
  `https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails,statistics&chart=mostPopular&regionCode=US&maxResults=10&key=${apiKey}`
);
const data = await response.json();
const videos = data.items;
---

<Layout title="Youtube Clone">
  <div class="sm:pl-1 sm:pr-3 sm:ml-20 h-full bg-white dark:bg-[#0F0F0F]">
    <div
      class="sm:p-4 dark:border-gray-700 sm:mt-14 h-full max-w-7xl mx-auto mb-16 sm:mb-0"
    >
      <ShowVideos server:defer>
        <div
          slot="fallback"
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 2xl:grid-cols-4 gap-4 mb-4 w-full h-full place-items-center"
        >
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
          <VideoSkeleton />
        </div>
      </ShowVideos>
    </div>
  </div>
</Layout>
